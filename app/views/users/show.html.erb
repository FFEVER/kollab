<div class="profile">
  <div class="profile__header">
    <% if @user.profile_image_url %>
      <%= image_tag @user.profile_image, class: "image__profile image__profile--large" %>
    <% else %>
      <%= image_pack_tag "portrait_placeholder.png",
            class: "image__profile image__profile--large" %>
    <% end %>
    <div class="d-flex flex-column justify-content-center mr-3 ml-3">
      <h2><%= "#{@user.first_name} #{@user.last_name}" %></h2>
      <p>
        <% if @user.role == "student"%>
          <% if @user.year == "1"%>
            <%= "#{@user.year}st year student in #{@user.faculty}"%>
          <%elsif @user.year == "2"%>
            <%= "#{@user.year}rd year student in #{@user.faculty}"%>
          <%elsif @user.year == "3"%>
            <%= "#{@user.year}rd year student in #{@user.faculty}"%>
          <%elsif @user.year == "4"%>
            <%= "#{@user.year}st year student in #{@user.faculty}"%>
          <%else%>
            <%= "Student in #{@user.faculty}" %>
          <%end%>
        <%else%>
          <%= "Professor in a faculty of #{@user.faculty}"%>
        <%end%>
      </p>
      <div class="d-flex flex-row align-items-center justify-content-between">
        <h3><%= @user.projects.count %></h3>
        <%= link_to "Projects", user_projects_path(@user), class: "mr-2 ml-2", method: :get%>
        <h3><%= @user.followings.count %></h3>
        <%= link_to "Followings", followings_user_path(@user),class: "mr-2 ml-2", method: :get%>
        <h3><%= @user.followers.count %></h3>
        <%= link_to "Followers", followers_user_path(@user), class: "mr-2 ml-2", method: :get%>
      </div>
    </div>
  </div>
  <div class="mt-3 mb-3">
    <p>
      <%= "#{@user.description}"%>
    </p>
  </div>
  <% if current_user != @user %>
    <% if current_user.following?(@user) %>
      <div class="d-flex flex-row">
        <%= link_to "Following", unfollow_user_path, method: :post,
              class: "button button--md button--unfollow--sm mr-1", remote: true, style: 'width:50%;'%>
        <button class="button button--md  mr-1" style="width:50%">Message</button>

      </div>
    <% else %>
      <div class="d-flex flex-row">
        <%= link_to "Follow", follow_user_path, method: :post,
              class: "button button--md button--follow--sm mr-1", remote: true, style: 'width:50%;'%>
        <button class="button button--md" style="width:50%">Message</button>

      </div>
    <% end %>
  <% else %>
    <%= button_to "Edit Profile", profile_edit_path, class: "button button--md profile__fullwidth", method: :get %>
  <% end %>
  <div class="d-flex flex-row mt-3 justify-content-between">
    <h3>Skills</h3>
    <%=image_pack_tag 'icon/more.png', style: 'height:20px;width:20px;'%>
  </div>
  <div class="d-flex flex-row mt-2">
    <% @user.skills.first(3).each do |skill| %>
      <%= link_to skill, "", class: "button--tags"%>
    <%end%>
  </div>
  <div class="d-flex flex-row mt-3 justify-content-between">
    <h3>Contact</h3>
    <%=image_pack_tag 'icon/more.png', style: 'height:20px;width:20px;'%>
  </div>

  <% if @user.phone != nil%>
    <div class="d-flex flex-row mt-3">
      <%=image_pack_tag 'icon/phone-call.png', style: 'height:20px;width:20px;margin-right:10px;'%>
      <p><%="#{@user.phone}"%></p>
    </div>
  <%end%>

  <% if @user.email != nil%>
    <div class="d-flex flex-row mt-2">
      <%=image_pack_tag 'icon/mail.png', style: 'height:20px;width:20px;margin-right:10px;'%>
      <p><%= "#{@user.email}" %></p>
    </div>
  <%end%>

  <% if @user.github != nil%>
    <div class="d-flex flex-row mt-2">
      <%=image_pack_tag 'icon/github.png', style: 'height:20px;width:20px;margin-right:10px;'%>
      <p><%="#{@user.github}"%></p>
    </div>
  <%end%>

  <% if @user.linkedin != nil%>
    <div class="d-flex flex-row mt-2">
      <%=image_pack_tag 'icon/linkedin.png', style: 'height:20px;width:20px;margin-right:10px;'%>
      <p><%="#{@user.linkedin}"%></p>
    </div>
  <%end%>

  <% if @user.facebook != nil%>
    <div class="d-flex flex-row mt-2">
      <%=image_pack_tag 'icon/facebook.png', style: 'height:20px;width:20px;margin-right:10px;'%>
      <p><%="#{@user.facebook}"%></p>
    </div>
  <%end%>

  <% if @user.instagram != nil%>
    <div class="d-flex flex-row mt-2">
      <%=image_pack_tag 'icon/instagram.png', style: 'height:20px;width:20px;margin-right:10px;'%>
      <p><%="#{@user.instagram}"%></p>
    </div>
  <%end%>

  <div class="d-flex flex-row justify-content-between mt-3 mb-3">
    <h3>Projects</h3>
    <% if current_user == @user%>
      <%= link_to image_pack_tag('icon/add.png', style: 'height:20px;width:20px;'), new_project_path%>
    <%end%>
  </div>
  <% if @user.projects.count > 0%>
    <% @projects.first(3).each do |project| %>
      <%= render partial: "project", locals: {project: project}%>
    <%end%>
    <%= link_to "See more", user_projects_path(@user), class: "project__link", method: :get %>
  <%end%>
  <div class="mt-3 mb-3">
    <h3>Interests</h3>
  </div>
  <div class="scrollmenu">
    <% 10.times do %>
      <%= link_to image_pack_tag('icon/rectangle.png', style: 'height:100px;width:100px;margin-right:10px;'), new_project_path %>
    <% end %>
  </div>
  <div class="mt-3 mb-3">
    <h3>Photos</h3>
  </div>
  <div class="scrollmenu">
    <% 10.times do %>
      <%= link_to image_pack_tag('icon/rectangle.png', style: 'height:100px;width:100px;margin-right:10px;'), new_project_path %>
    <% end %>
  </div>

  <%= react_component("profile/UserProfile",
    {
      authenticityToken: form_authenticity_token,
      editPath: edit_user_registration_path,
      currentUser: current_user,
      projects: @projects,
      isProfileOwner: current_user == @user
    })
%>
</div>
